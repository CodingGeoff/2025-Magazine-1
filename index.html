<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Free magazine archive</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <style>
      /* 全局样式 */
      body {
        font-family: "Montserrat", sans-serif;
        background: linear-gradient(135deg, #f4f4f9 0%, #e0e0e9 100%);
        padding: 20px;
        margin: 0;
        background-image: url("https://www.transparenttextures.com/patterns/cubes.png");
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }

      /* 标题样式 */
      h1 {
        font-size: 3.5rem;
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 3rem;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        position: relative;
        animation: fadeInDown 1s ease-out;
      }

      h1::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: linear-gradient(to right, #3498db, #2980b9);
        border-radius: 2px;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* 无序列表样式 */
      ul {
        list-style-type: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        width: 90%;
      }

      /* 列表项样式 */
      li {
        perspective: 1000px;
      }

      /* 链接样式 */
      a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        background-color: #ffffff;
        color: #333;
        text-decoration: none;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        transform-style: preserve-3d;
      }

      a::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: rgba(255, 255, 255, 0.2);
        transform: rotate(45deg);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      a:hover {
        transform: translateY(-10px) scale(1.05) rotateX(10deg);
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
        background: linear-gradient(to bottom right, #3498db, #2980b9);
        color: white;
      }

      a:hover::before {
        opacity: 1;
      }

      /* 链接内部图标样式 */
      .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        transition: color 0.3s ease;
      }

      a:hover .icon {
        color: white;
      }

      /* 链接内部文字样式 */
      .title {
        font-size: 1.2rem;
        font-weight: 600;
        text-align: center;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      /* 自定义文件选择按钮样式 */
      .custom-file-label {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin-bottom: 15px;
      }

      #fileinp {
        opacity: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }

      #btn {
        background-color: #2ecc71;
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        font-size: 18px;
        font-family: "Montserrat", sans-serif;
      }

      #btn:hover {
        background-color: #27ae60;
      }
    </style>
  </head>

  <body>
    <h1>Archive</h1>
    <ul id="pdf-list"></ul>

    <script>
      function get_file_icon_class(file) {
        const ext = file.split(".").pop().toLowerCase();
        switch (ext) {
          case "pdf":
            return "fa-solid fa-file-pdf";
          case "docx":
            return "fa-solid fa-file-word";
          case "xlsx":
            return "fa-solid fa-file-excel";
          case "pptx":
            return "fa-solid fa-file-powerpoint";
          default:
            return "fa-solid fa-file";
        }
      }

      function get_file_icon_color(file) {
        const ext = file.split(".").pop().toLowerCase();
        switch (ext) {
          case "pdf":
            return "#e74c3c";
          case "docx":
            return "#2ecc71";
          case "xlsx":
            return "#f1c40f";
          case "pptx":
            return "#3498db";
          default:
            return "#95a5a6";
        }
      }

      //   const fs = require("fs");
      //   const path = require("path");
      //   console.log("hihi");

      //   function getFileNamesInDirectory() {
      //     const directoryPath = path.join(__dirname, "./static/uploads");
      //     return new Promise((resolve, reject) => {
      //       fs.readdir(directoryPath, (err, files) => {
      //         if (err) {
      //           reject(err);
      //         } else {
      //           resolve(files);
      //         }
      //       });
      //     });
      //   }

      //   // 使用 .then 方法获取具体值
      //   getFileNamesInDirectory()
      //     .then((files) => {
      //       const pdfFiles = files;
      //     })
      //     .catch((err) => {
      //       console.error("读取目录时出错:", err);
      //     });

      // 要显示的 PDF 文件列表
      //   const pdfFiles = [
      //     "Sports Illustrated National Champions Commemorative 2025.pdf",
      //   ];
      //   const pdfFiles = getFileNamesInDirectory();

      const pdfFiles = [
        "Model Airplane News 03 04 2025.pdf",
        "Sports Illustrated National Champions Commemorative 2025.pdf",
      ];

      const pdfList = document.getElementById("pdf-list");

      pdfFiles.forEach((file) => {
        const listItem = document.createElement("li");
        const link = document.createElement("a");
        link.href = `./static/uploads/${file}`;
        // 添加 target="_blank" 属性
        link.target = "_blank";

        const icon = document.createElement("i");
        icon.className = `icon ${get_file_icon_class(file)}`;
        icon.style.color = get_file_icon_color(file);

        const title = document.createElement("span");
        title.className = "title";
        title.textContent = file;

        link.appendChild(icon);
        link.appendChild(title);
        listItem.appendChild(link);
        pdfList.appendChild(listItem);
      });
    </script>
  </body>
</html>
