<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Free magazine archive</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <style>
      /* 全局样式 */
      body {
        font-family: "Montserrat", sans-serif;
        background: linear-gradient(135deg, #f4f4f9 0%, #e0e0e9 100%);
        padding: 20px;
        margin: 0;
        background-image: url("https://www.transparenttextures.com/patterns/cubes.png");
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }

      /* 标题样式 */
      h1 {
        font-size: 3.5rem;
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 1rem;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        position: relative;
        animation: fadeInDown 1s ease-out;
      }

      h1::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: linear-gradient(to right, #3498db, #2980b9);
        border-radius: 2px;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* 搜索框样式 */
      .search-container {
        margin-bottom: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        max-width: 600px;
      }

      .search-input {
        width: 100%;
        padding: 15px 20px;
        font-size: 1rem;
        border: 2px solid #3498db;
        border-radius: 25px;
        outline: none;
        transition: all 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .search-input:focus {
        border-color: #2980b9;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      }

      /* 无序列表样式 */
      ul {
        list-style-type: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        width: 90%;
      }

      /* 列表项样式 */
      li {
        perspective: 1000px;
      }

      /* 链接样式 */
      a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        background-color: #ffffff;
        color: #333;
        text-decoration: none;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        transform-style: preserve-3d;
      }

      a::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: rgba(255, 255, 255, 0.2);
        transform: rotate(45deg);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      a:hover {
        transform: translateY(-10px) scale(1.05) rotateX(10deg);
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
        background: linear-gradient(to bottom right, #3498db, #2980b9);
        color: white;
      }

      a:hover::before {
        opacity: 1;
      }

      /* 链接内部图标样式 */
      .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        transition: color 0.3s ease;
      }

      a:hover .icon {
        color: white;
      }

      /* 链接内部文字样式 */
      .title {
        font-size: 1.2rem;
        font-weight: 600;
        text-align: center;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
    </style>
  </head>

  <body>
    <h1>Archive</h1>
    <div class="search-container">
      <input
        type="text"
        id="search-input"
        class="search-input"
        placeholder="Search for a magazine..."
      />
    </div>
    <ul id="pdf-list"></ul>

    <script>
      function get_file_icon_class(file) {
        const ext = file.split(".").pop().toLowerCase();
        switch (ext) {
          case "pdf":
            return "fa-solid fa-file-pdf";
          case "docx":
            return "fa-solid fa-file-word";
          case "xlsx":
            return "fa-solid fa-file-excel";
          case "pptx":
            return "fa-solid fa-file-powerpoint";
          default:
            return "fa-solid fa-file";
        }
      }

      function get_file_icon_color(file) {
        const ext = file.split(".").pop().toLowerCase();
        switch (ext) {
          case "pdf":
            return "#e74c3c";
          case "docx":
            return "#2ecc71";
          case "xlsx":
            return "#f1c40f";
          case "pptx":
            return "#3498db";
          default:
            return "#95a5a6";
        }
      }

      const pdfFiles = [
        "Artforum 02 2025.pdf",
        "Canadian Living 03 2025.pdf",
        "Kitchen Bath Design News 01 02 2025.pdf",
        "Model Airplane News 03 04 2025.pdf",
        "Sports Illustrated National Champions Commemorative 2025.pdf",
      ];

      const pdfList = document.getElementById("pdf-list");
      const searchInput = document.getElementById("search-input");

      // 从 URL 获取搜索参数
      const urlParams = new URLSearchParams(window.location.search);
      const searchQuery = urlParams.get("search") || "";

      // 设置搜索框的初始值
      searchInput.value = searchQuery;

      // 过滤并显示 PDF 文件
      function filterAndDisplayPDFs(query) {
        pdfList.innerHTML = ""; // 清空当前列表

        const filteredFiles = pdfFiles.filter((file) =>
          file.toLowerCase().includes(query.toLowerCase())
        );

        filteredFiles.forEach((file) => {
          const listItem = document.createElement("li");
          const link = document.createElement("a");
          link.href = `./static/uploads/${file}`;
          link.target = "_blank";

          const icon = document.createElement("i");
          icon.className = `icon ${get_file_icon_class(file)}`;
          icon.style.color = get_file_icon_color(file);

          const title = document.createElement("span");
          title.className = "title";
          title.textContent = file;

          link.appendChild(icon);
          link.appendChild(title);
          listItem.appendChild(link);
          pdfList.appendChild(listItem);
        });
      }

      // 初始加载时根据 URL 参数过滤
      filterAndDisplayPDFs(searchQuery);

      // 监听搜索框输入事件
      searchInput.addEventListener("input", (e) => {
        filterAndDisplayPDFs(e.target.value);
      });
    </script>
  </body>
</html>
